<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=PT+Serif:400,400italic,700,700italic&subset=latin,cyrillic-ext,cyrillic,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --mermaid-theme: default; --mermaid-sequence-numbers: off; --mermaid-flowchart-curve: linear; --mermaid--gantt-left-padding: 75; --sequence-theme: simple; }


:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


/* meyer reset -- http://meyerweb.com/eric/tools/css/reset/ , v2.0 | 20110126 | License: none (public domain) */

@include-when-export url(https://fonts.loli.net/css?family=PT+Serif:400,400italic,700,700italic&subset=latin,cyrillic-ext,cyrillic,latin-ext);

/* =========== */

/* pt-serif-regular - latin */
/* pt-serif-italic - latin */
/* pt-serif-700 - latin */
/* pt-serif-700italic - latin */
:root {
	--active-file-bg-color: #dadada;
	--active-file-bg-color: rgba(32, 43, 51, 0.63);
	--active-file-text-color: white;
	--bg-color: #f3f2ee;
	--text-color: #1f0909;
	--control-text-color: #444;
	--rawblock-edit-panel-bd: #e5e5e5;

	--select-text-bg-color: rgba(32, 43, 51, 0.63);
  --select-text-font-color: white;
}

pre {
	--select-text-bg-color: #36284e;
	--select-text-font-color: #fff;
}

html {
	font-size: 16px;
	-webkit-font-smoothing: antialiased;
}

html, body {
	background-color: #f3f2ee;
	font-family: "PT Serif", 'Times New Roman', Times, serif;
	color: #1f0909;
	line-height: 1.5em;
}

/*#write {
	overflow-x: auto;
    max-width: initial;
	padding-left: calc(50% - 17em);
    padding-right: calc(50% - 17em);
}

@media (max-width: 36em) {
 	#write {
 		padding-left: 1em;
    	padding-right: 1em;
 	}
}*/

#write {
	max-width: 40em;
}

@media only screen and (min-width: 1400px) {
	#write {
			max-width: 914px;
	}
}

ol li {
	list-style-type: decimal;
	list-style-position: outside;
}
ul li {
	list-style-type: disc;
	list-style-position: outside;
}

ol,
ul {
	list-style: none;
}

blockquote,
q {
	quotes: none;
}
blockquote:before,
blockquote:after,
q:before,
q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}
/* styles */

/* ====== */

/* headings */

h1,
h2,
h3,
h4,
h5,
h6 {
	font-weight: bold;
}
h1 {
	font-size: 1.875em;
	/*30 / 16*/
	line-height: 1.6em;
	/* 48 / 30*/
	margin-top: 2em;
}
h2,
h3 {
	font-size: 1.3125em;
	/*21 / 16*/
	line-height: 1.15;
	/*24 / 21*/
	margin-top: 2.285714em;
	/*48 / 21*/
	margin-bottom: 1.15em;
	/*24 / 21*/
}
h3 {
	font-weight: normal;
}
h4 {
	font-size: 1.125em;
	/*18 / 16*/
	margin-top: 2.67em;
	/*48 / 18*/
}
h5,
h6 {
	font-size: 1em;
	/*16*/
}
h1 {
	border-bottom: 1px solid;
	margin-bottom: 1.875em;
	padding-bottom: 0.8125em;
}
/* links */

a {
	text-decoration: none;
	color: #065588;
}
a:hover,
a:active {
	text-decoration: underline;
}
/* block spacing */

p,
blockquote,
.md-fences {
	margin-bottom: 1.5em;
}
h1,
h2,
h3,
h4,
h5,
h6 {
	margin-bottom: 1.5em;
}
/* blockquote */

blockquote {
	font-style: italic;
	border-left: 5px solid;
	margin-left: 2em;
	padding-left: 1em;
}
/* lists */

ul,
ol {
	margin: 0 0 1.5em 1.5em;
}
/* tables */
.md-meta,.md-before, .md-after {
	color:#999;
}

table {
	margin-bottom: 1.5em;
	/*24 / 16*/
	font-size: 1em;
	/* width: 100%; */
}
thead th,
tfoot th {
	padding: .25em .25em .25em .4em;
	text-transform: uppercase;
}
th {
	text-align: left;
}
td {
	vertical-align: top;
	padding: .25em .25em .25em .4em;
}

code,
.md-fences {
	background-color: #dadada;
}

code {
	padding-left: 2px;
	padding-right: 2px;
}

.md-fences {
	margin-left: 2em;
	margin-bottom: 3em;
	padding-left: 1ch;
	padding-right: 1ch;
}

pre,
code,
tt {
	font-size: .875em;
	line-height: 1.714285em;
}
/* some fixes */

h1 {
	line-height: 1.3em;
	font-weight: normal;
	margin-bottom: 0.5em;
}

p + ul,
p + ol{
	margin-top: .5em;
}

h3 + ul,
h4 + ul,
h5 + ul,
h6 + ul,
h3 + ol,
h4 + ol,
h5 + ol,
h6 + ol {
	margin-top: .5em;
}

li > ul,
li > ol {
	margin-top: inherit;
	margin-bottom: 0;
}

li ol>li {
	list-style-type: lower-alpha;
}

li li ol>li{
	list-style-type: lower-roman;
}

h2,
h3 {
	margin-bottom: .75em;
}
hr {
	border-top: none;
	border-right: none;
	border-bottom: 1px solid;
	border-left: none;
}
h1 {
	border-color: #c5c5c5;
}
blockquote {
	border-color: #bababa;
	color: #656565;
}

blockquote ul,
blockquote ol {
	margin-left:0;
}

.ty-table-edit {
	background-color: transparent;
}
thead {
	background-color: #dadada;
}
tr:nth-child(even) {
	background: #e8e7e7;
}
hr {
	border-color: #c5c5c5;
}
.task-list{
	padding-left: 1rem;
}

.md-task-list-item {
	padding-left: 1.5rem;
	list-style-type: none;
}

.md-task-list-item > input:before {
	content: '\221A';
	display: inline-block;
	width: 1.25rem;
  	height: 1.6rem;
	vertical-align: middle;
	text-align: center;
	color: #ddd;
	background-color: #F3F2EE;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before{
	color: inherit;
}

#write pre.md-meta-block {
	min-height: 1.875rem;
	color: #555;
	border: 0px;
	background: transparent;
	margin-top: -4px;
	margin-left: 1em;
	margin-top: 1em;
}

.md-image>.md-meta {
	color: #9B5146;
}

.md-image>.md-meta{
	font-family: Menlo, 'Ubuntu Mono', Consolas, 'Courier New', 'Microsoft Yahei', 'Hiragino Sans GB', 'WenQuanYi Micro Hei', serif;
}


#write>h3.md-focus:before{
	left: -1.5rem;
	color:#999;
	border-color:#999;
}
#write>h4.md-focus:before{
	left: -1.5rem;
	top: .25rem;
	color:#999;
	border-color:#999;
}
#write>h5.md-focus:before{
	left: -1.5rem;
	top: .0.3125rem;
	color:#999;
	border-color:#999;
}
#write>h6.md-focus:before{
	left: -1.5rem;
	top: 0.3125rem;
	color:#999;
	border-color:#999;
}

.md-toc:focus .md-toc-content{
	margin-top: 19px;
}

.md-toc-content:empty:before{
	color: #065588;
}
.md-toc-item {
	color: #065588;
}
#write div.md-toc-tooltip {
	background-color: #f3f2ee;
}

#typora-sidebar {
	background-color: #f3f2ee;
	-webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.375);
  	box-shadow: 0 6px 12px rgba(0, 0, 0, 0.375);
}

.pin-outline #typora-sidebar {
	background: inherit;
	box-shadow: none;
	border-right: 1px dashed;
}

.pin-outline #typora-sidebar:hover .outline-title-wrapper {
	border-left:1px dashed;
}

.outline-item:hover {
  background-color: #dadada;
  border-left: 28px solid #dadada;
  border-right: 18px solid #dadada;
}

.typora-node .outline-item:hover {
  	border-right: 28px solid #dadada;
}

.outline-expander:before {
  content: "\f0da";
  font-family: FontAwesome;
  font-size:14px;
  top: 1px;
}

.outline-expander:hover:before,
.outline-item-open>.outline-item>.outline-expander:before {
  content: "\f0d7";
}

.modal-content {
	background-color: #f3f2ee;
}

.auto-suggest-container ul li {
	list-style-type: none;
}

/** UI for electron */

.megamenu-menu,
#top-titlebar, #top-titlebar *,
.megamenu-content {
	background: #f3f2ee;
	color: #1f0909;
}

.megamenu-menu-header {
	border-bottom: 1px dashed #202B33;
}

.megamenu-menu {
	box-shadow: none;
	border-right: 1px dashed;
}

header, .context-menu, .megamenu-content, footer {
	font-family: "PT Serif", 'Times New Roman', Times, serif;
    color: #1f0909;
}

#megamenu-back-btn {
	color: #1f0909;
	border-color: #1f0909;
}

.megamenu-menu-header #megamenu-menu-header-title:before {
	color: #1f0909;
}

.megamenu-menu-list li a:hover, .megamenu-menu-list li a.active {
	color: inherit;
	background-color: #e8e7df;
}

.long-btn:hover {
	background-color: #e8e7df;
}

#recent-file-panel tbody tr:nth-child(2n-1) {
    background-color: transparent !important;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(2) {
    color: inherit;
}

.megamenu-menu-panel .btn {
	background-color: #D2D1D1;
}

.btn-default {
	background-color: transparent;
}

.typora-sourceview-on #toggle-sourceview-btn,
.ty-show-word-count #footer-word-count {
	background: #c7c5c5;
}

#typora-quick-open {
    background-color: inherit;
}

.md-diagram-panel {
	margin-top: 8px;
}

.file-list-item-file-name {
	font-weight: initial;
}

.file-list-item-summary {
	opacity: 1;
}

.file-list-item {
	color: #777;
}

.file-list-item.active {
	background-color: inherit;
	color: black;
}

.ty-side-sort-btn.active {
	background-color: inherit;
}

.file-list-item.active .file-list-item-file-name  {
	font-weight: bold;
}

.file-list-item{
    opacity:1 !important;
}

.file-library-node.active>.file-node-background{
	background-color: rgba(32, 43, 51, 0.63);
	background-color: var(--active-file-bg-color);
}

.file-tree-node.active>.file-node-content{
	color: white;
	color: var(--active-file-text-color);
}

.md-task-list-item>input {
	margin-left: -1.7em;
	margin-top: calc(1rem - 12px);
}

input {
	border: 1px solid #aaa;
}

.megamenu-menu-header #megamenu-menu-header-title,
.megamenu-menu-header:hover, 
.megamenu-menu-header:focus {
	color: inherit;
}

.dropdown-menu .divider {
	border-color: #e5e5e5;
	opacity: 1;
}

/* https://github.com/typora/typora-issues/issues/2046 */
.os-windows-7 strong,
.os-windows-7 strong  {
	font-weight: 760;
}

.ty-preferences .btn-default {
	background: transparent;
}

.ty-preferences .window-header {
	border-bottom: 1px dashed #202B33;
	box-shadow: none;
}

#sidebar-loading-template, #sidebar-loading-template.file-list-item {
	color: #777;
}

.searchpanel-search-option-btn.active {
	background: #777;
	color: white;
}


</style><title>doc-Pipeline_Main02_deepomics</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='documentation-gappmain02'><span>Documentation: GAPP_Main02</span></h1><p><span>This is the documentation for deepomics pipeline Main02 (version: -06.2004), written by Alex J. K. XU on April 19, 2022.  </span></p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#documentation-gappmain02">Documentation: GAPP_Main02</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n4"><a class="md-toc-inner" href="#overall">Overall</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n7"><a class="md-toc-inner" href="#development-team">Development Team</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n16"><a class="md-toc-inner" href="#version-information">Version Information</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n30"><a class="md-toc-inner" href="#programming-language">Programming Language</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n40"><a class="md-toc-inner" href="#overall-flow-chart">Overall flow chart</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n42"><a class="md-toc-inner" href="#before-using-this-pipeline">Before using this pipeline</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n43"><a class="md-toc-inner" href="#environment">Environment</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n46"><a class="md-toc-inner" href="#input">Input</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n51"><a class="md-toc-inner" href="#prerequisites">Prerequisites</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n55"><a class="md-toc-inner" href="#work-flow">Work-flow</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n56"><a class="md-toc-inner" href="#gappcore-bio-analysis-process">GAPP_Core: Bio-analysis process</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n57"><a class="md-toc-inner" href="#preparation">Preparation</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n61"><a class="md-toc-inner" href="#module-inputs-1">Module inputs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n75"><a class="md-toc-inner" href="#generate-scripts">Generate scripts</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n82"><a class="md-toc-inner" href="#detailed-analysis-process">Detailed analysis process</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n92"><a class="md-toc-inner" href="#special-note">Special Note</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n97"><a class="md-toc-inner" href="#gapplinking-decompress-the-vcf-package">GAPP_Linking: Decompress the vcf package</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n99"><a class="md-toc-inner" href="#module-inputs-2">Module inputs</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n112"><a class="md-toc-inner" href="#gappfilter-gene-filter-with-panel-file">GAPP_Filter: Gene filter with panel file</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n113"><a class="md-toc-inner" href="#module-inputs-3">Module inputs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n127"><a class="md-toc-inner" href="#main-program-1">Main program</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n132"><a class="md-toc-inner" href="#gappinfres-data-preprocessing">GAPP_Infres: Data preprocessing</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n135"><a class="md-toc-inner" href="#module-inputs-4">Module inputs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n149"><a class="md-toc-inner" href="#generate-json-1">Generate json</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n155"><a class="md-toc-inner" href="#main-program-2">Main program</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n162"><a class="md-toc-inner" href="#gappexps-report-generation-process">GAPP_Exps: Report Generation Process</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n165"><a class="md-toc-inner" href="#module-inputs-5">Module inputs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n187"><a class="md-toc-inner" href="#about-template-package">About template package</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n193"><a class="md-toc-inner" href="#pruning">Pruning</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n195"><a class="md-toc-inner" href="#generate-json-2">Generate json</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n200"><a class="md-toc-inner" href="#main-program-3">Main program</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n208"><a class="md-toc-inner" href="#gapplinking-unified-output-path">GAPP_Linking: Unified output path</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n210"><a class="md-toc-inner" href="#module-inputs-6">Module inputs</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n239"><a class="md-toc-inner" href="#module-outputs">Module outputs</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n241"><a class="md-toc-inner" href="#ending">Ending</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n243"><a class="md-toc-inner" href="#in-the-end">In the end</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n246"><a class="md-toc-inner" href="#reference">Reference</a></span></p></div><h2 id='overall'><span>Overall</span></h2><p><span>This pipeline was mainly based on the previous </span><code>AutoRunShell</code><span> shell script, which was first written by Mr. Jiakai XU and Mr. Xun ZHANG from the GAPP development team to automate the entire bio-analysis process together with the final report generation function. It was initially debugged on the delta2 server, but after time and several analysis proved its accuracy and usability, we adapted it to the deepomics.org website for official use.  </span></p><p><span>This whole pipeline consists of several modules which can also be found on the same platform that all developed by us. For some important parts, I will cover them later in this documentation.</span></p><h2 id='development-team'><span>Development Team</span></h2><p><span>@author</span><span>	</span><span>Mr. Jiakai XU</span><span>			</span><span>  </span><span>	</span><a href='mailto:jiakai.xu@my.cityu.edu.hk' target='_blank' class='url'>jiakai.xu@my.cityu.edu.hk</a><span>		</span></p><p><span>Responsible for the overall design, coding and debugging of the whole shell. Initially build overall pipeline, proposed and implemented the new idea of using transfered JSON file for task submission. Participate in debugging of biological analysis module and adaptation of new generation exps program.</span></p><p><span>@author</span><span>	</span><span>Mr. Xun ZHANG</span><span>			</span><a href='mailto:xzhang2487-c@my.cityu.edu.hk' target='_blank' class='url'>xzhang2487-c@my.cityu.edu.hk</a><span>		</span></p><p><span>Responsible for assisting debugging the whole program, mainly responsible for finding and confirming the correct path of all required files and resources, as well as the design of related folder structure. Responsible for several python-related sections. Participate in the adaptation of new generation exps program.</span></p><p><span>@author </span><span>	</span><span>Miss Yuqin HUANG</span><span>		</span><a href='mailto:yqhuang23-c@my.cityu.edu.hk' target='_blank' class='url'>yqhuang23-c@my.cityu.edu.hk</a><span>	</span></p><p><span>Responsible for the adaptation and debugging of the new infres program, and is now developing the next generation of report template files used in exps.</span></p><p><span>@author</span><span>	</span><span>Miss Shiying LI</span><span>				</span><a href='mailto:shiyingli7-c@my.cityu.edu.hk' target='_blank' class='url'>shiyingli7-c@my.cityu.edu.hk</a><span>	</span></p><p><span>Act as project supervisor to oversee the whole project. Provided the initial </span><code>generate_script</code><span> script and made many professional technical suggestions on the biological analysis process.</span><span>	</span></p><h2 id='version-information'><span>Version Information</span></h2><ul><li><span>-deepomics : Online deepomics platform used only. We considered the relative resource location and file access permission inside the deepomics docker.</span></li><li><span>-pipeline: For deepomics pipeline used only. Because Pipeline and Module have different file hierarchies at run time, all modules covered in this article may not be called individually by the Module itself.</span></li><li><span>-timing : Running time will be compute and displayed in a human readable way.</span></li><li><span>-error : We redirected the stderr stream to the same as stdout stream to make running log more easy to read on the deepomics website.</span></li><li><span>version : 06.2004+</span></li><li><span>since : March, 2022</span></li></ul><h2 id='programming-language'><span>Programming Language</span></h2><ul><li><span>Shell Script</span></li><li><span>Java</span></li><li><span>Python</span></li><li><span>JSON</span></li></ul><h2 id='overall-flow-chart'><span>Overall flow chart</span></h2><p><img src="https://homepage.cs.cityu.edu.hk/jiakaixu2/project/deepomics.main02.flowchart" referrerpolicy="no-referrer" alt="Image text"></p><h2 id='before-using-this-pipeline'><span>Before using this pipeline</span></h2><h3 id='environment'><span>Environment</span></h3><p><strong><span>CentOS Linux Operating System</span></strong></p><p><span>The program has been tested on two different platforms with CentOS Linux release 7.9.2009. Due to mission requirements, we won&#39;t be doing any testing on MAC or Windows.</span></p><h3 id='input'><span>Input</span></h3><p><span>This version of the pipeline requires a json format file as input, the input parameter should point to the absolute path to that json file, such as </span><code>/ data/input_transmit/example_key.json</code><span>. </span></p><p><span>The following is an example format of json:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"uid"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"fid"</span>: <span class="cm-string">"xxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"key"</span>: <span class="cm-string">"uxxfxxxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"credentials"</span>: <span class="cm-string">"xxxxxxxxxxxxxxxx 64-bits xxxxxxxxxxxxxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"app"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"id"</span>: <span class="cm-string">"xxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"name"</span>: <span class="cm-string">"xxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"report"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"panel"</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"template"</span>: <span class="cm-string">"Not_In_File"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"operator"</span>: <span class="cm-string">"Not_In_File"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"user"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"id"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"name"</span>: <span class="cm-string">"xxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"gender"</span>: <span class="cm-string">"Not_In_File"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"age"</span>: <span class="cm-string">"Not_In_File"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"birth"</span>: <span class="cm-string">"Not_In_File"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"tel"</span>: <span class="cm-string">"Not_In_File"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"email"</span>: <span class="cm-string">"xxx"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"analysis"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"id"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"name"</span>: <span class="cm-string">"xxx"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"isPiepline"</span>: <span class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 687px;"></div><div class="CodeMirror-gutters" style="display: none; height: 687px;"></div></div></div></pre><p><span>For privacy reasons, I have replaced the value in the actual JSON file above. We assume that the root of JSON is </span><code>json</code><span>, so I will use </span><code>json.key.value</code><span> to access the value like </span><code>uxxfxxxx</code><span>. </span><code>Not_In_File</code><span> indicates that the value is not supported by GAPP website side and can be expanded in the future.</span></p><h3 id='prerequisites'><span>Prerequisites</span></h3><p><span>Your genetic data files are stored in </span><code>.fq.gz</code><span> format and are already located in the server directory we specified. Assuming your user ID is &quot;user_id&quot; and the file name provided is &quot;file_name&quot;, then your data files should be located separately on our dl380a server at,</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"/ENCRYPTED_PATH/user</span><span class="cm-def">${user_id}</span><span class="cm-string">/data/</span><span class="cm-def">${file_name}</span><span class="cm-string">_1.fq.gz"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"/ENCRYPTED_PATH/user</span><span class="cm-def">${user_id}</span><span class="cm-string">/data/</span><span class="cm-def">${file_name}</span><span class="cm-string">_2.fq.gz"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"/ENCRYPTED_PATH/user</span><span class="cm-def">${user_id}</span><span class="cm-string">/data/</span><span class="cm-def">${file_name}</span><span class="cm-string">_panel.txt"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 74px;"></div><div class="CodeMirror-gutters" style="display: none; height: 74px;"></div></div></div></pre><p><span>For security reasons, please contact the project leader manually for the address, or you can change the source code to be the one used in your project.</span></p><h2 id='work-flow'><span>Work-flow</span></h2><h3 id='gappcore-bio-analysis-process'><span>GAPP_Core: Bio-analysis process</span></h3><h4 id='preparation'><span>Preparation</span></h4><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">user_path</span><span class="cm-operator">=</span><span class="cm-string">"./user</span><span class="cm-def">$user_id</span><span class="cm-string">"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">mkdir</span> <span class="cm-string">"</span><span class="cm-def">$user_path</span><span class="cm-string">"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">mkdir</span> <span class="cm-string">"</span><span class="cm-def">$user_path</span><span class="cm-string">/code"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">mkdir</span> <span class="cm-string">"</span><span class="cm-def">$user_path</span><span class="cm-string">/data"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cp</span> <span class="cm-string">"/ENCRYPTED_PATH/user</span><span class="cm-def">$user_id</span><span class="cm-string">/data/</span><span class="cm-def">${file_name}</span><span class="cm-string">_1.fq.gz"</span> <span class="cm-string">"</span><span class="cm-def">$user_path</span><span class="cm-string">/data"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cp</span> <span class="cm-string">"/ENCRYPTED_PATH/user</span><span class="cm-def">$user_id</span><span class="cm-string">/data/</span><span class="cm-def">${file_name}</span><span class="cm-string">_2.fq.gz"</span> <span class="cm-string">"</span><span class="cm-def">$user_path</span><span class="cm-string">/data"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 221px;"></div><div class="CodeMirror-gutters" style="display: none; height: 221px;"></div></div></div></pre><p><span>Under your current workspace, we will first create the required folders, namely ./user/code and ./user/data. and then, as required, as a precondition, your genome files in both directions have been located in the designated places we required on the server (for security reasons, please contact the project leader manually for the address). We will go to the designated place to find and copy your files to our working directory.  </span></p><p><span>Then, their is an important variable that you need to pay special attention to is the </span><code>rootdir</code><span> and </span><code>shellroot</code><span>. The former is used to tell our program the location of some necessary helper programs, such as the generate_scripts.sh that will be mentioned later, which is usually the relative address on deepomics system from the current task&#39;s directory to the module&#39;s static directory.  The latter specifies the location of the dynamic codes. This is passed to generate_scripts.sh that will be mentioned later to generate code segments to the specified location, and it is also used to tell subsequent runtime addresses.</span></p><h4 id='module-inputs-1'><span>Module inputs</span></h4><ul><li><p><span>input files </span></p><ul><li><span>None</span></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-i: </span><code>json.uid.value</code></li><li><span>-f: </span><code>json.fid.value</code></li></ul></li></ul><h4 id='generate-scripts'><span>Generate scripts</span></h4><p><span>Our AutoRunShell will invoke the </span><code>generate_script.sh</code><span> to perform the detailed work.    </span></p><p><span>This helper script only ask for two parameter inputs:   </span><code>-l user_path</code><span> and </span><code>-n user_name</code><span>, for which the user path is something like </span><code>&quot;./userXYZ&quot;</code><span> while the file name is just a simple name like </span><code>R</code><span> or </span><code>NR</code><span> in our default folder.</span></p><p><span>This script will use one of its parent function called </span><code>AutoRunShell#fsizeJudge()</code><span> to judge the file size of those genetic files to be tested.  If the file size is good enough, we will promote to you </span><code>&quot;AutoRunShell &gt;&gt; fsizeJudge &gt;&gt; GOOD DATA SIZE: Your filesize is greater than threshold. Go ahead and have a good day!&quot;</code><span>. On the other hand, if the file size is smaller than the threshold we set, our shell will warning that </span><code>&quot;AutoRunShell &gt;&gt; fsizeJudge &gt;&gt; SMALL DATA WARN: Your filesize is xxx, which is smaller than the threshold. Error may occur during the analysing process, consider disabling the filtering function!&quot;</code></p><p><strong><span>Special Debug Note</span></strong><span>: Previously Miss Shiying LI suggested to disable a01-filterfq process if the small size input file is detected, but we had tried that directly disable is not applicable because some afterwards processes are depend on the output result of the first process. </span><em><span>TODO</span></em><span>: Maybe set some filter parameter to make it pass more easilly is a better choice than directly disable it.</span></p><p><strong><span>However</span></strong><span>, due to hierarchical relationships between processes, the child process is difficult to pass variables back to its parent process. We did make it come true using </span><code>mkfifo</code><span> or called &quot;named pipe&quot; on local delta2 server, but deepomics docker does not seems to support this operation. </span><em><span>TODO</span></em><span>: According to Ms L.J. CHE, the docker should be able to support multi-thread operating, so create child-thread may solve the variable not readable issue exists on child-process programming.</span></p><p><span>After all the work finished, a series of ready to run shell scripts will be generated into the folder of </span><code>$user_path/code/</code><span> directory, they are </span><code>a01-filterfq.sh</code><span>, </span><code>a02-mem.sh</code><span>, </span><code>a03-rmclean.sh</code><span>, </span><code>a04-sort.sh</code><span>, </span><code>a05-rmfixmate.sh</code><span>, </span><code>a06-markdup.sh</code><span>, </span><code>a07-bamindex.sh</code><span>, </span><code>a08-rmsort.sh</code><span>, </span><code>a09-realignercreator.sh</code><span>, </span><code>a10-realn.sh</code><span>, </span><code>a11-baserecal.sh</code><span>, </span><code>a12-printreads.sh</code><span>, </span><code>a13-hc.sh</code><span>, </span><code>a14-rmbaserecal.sh</code><span>, </span><code>a15-rmrealn.sh</code><span>, </span><code>a16-concat.sh</code><span>, </span><code>a17-vqsrsnp.sh</code><span>, </span><code>a18-applysnp.sh</code><span>, </span><code>a19-vqsrindel.sh</code><span>, </span><code>a20-applyindel.sh</code><span>, </span><code>a21-annovar-vcf.sh</code><span> the detailed bioanalysis information can be found at </span><a href='#reference'><span>Reference#GATK</span></a><span>.</span></p><h4 id='detailed-analysis-process'><span>Detailed analysis process</span></h4><p><span>For all the 21 generated scripts listed above, we will run them sequentially.    </span></p><p><span>However, noticed that running GATK process and tools with a wrong version may cause sever unexpected exceptions. In our program, we called a well-designed global function </span><code>AutoRunShell#loadAll()</code><span>  (shown below) to make sure all the required module are in the correct version.</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">loadAll () {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">echo</span> <span class="cm-string">"AutoRunShell &gt;&gt; Load all is now be called!"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  module load gatk/3.8-0-java-1.8.0_144</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  module load annovar/2019oct24-perl-5.30.2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 123px;"></div><div class="CodeMirror-gutters" style="display: none; height: 123px;"></div></div></div></pre><p><strong><span>Special Debug Note</span></strong><span>: In our experience, </span><code>a13-hc</code><span> and </span><code>a17-vqsrsnp</code><span> are two places that are often prone to failure. For the &quot;Bad input: Values for ReadPosRankSum annotation not detected for ANY training variant in the input callset. VariantAnnotator may be used to add these annotation ERROR of </span><code>a17-vqsrsnp</code><span>, </span></p><ul><li><span>We tried to delete the -an option (such as </span><code>-an ReadPosRankSum</code><span>) reported in error message and let it skip the analysis module, which was really helpful when experimenting with small dataset. However, when we changed to formal large gene data analysis after successful development, even if the deleted parameters were added back, there would be no problem. To sum up, deleting an option can solve some problems temporally, but the real cause of this problem is the size of data is too small. </span></li><li><span>In the above debug process, according to Ms Shiying LI&#39;s instructions, we also spent a lot of time trying to solve the problem if we reduce the subsequent </span><code>-tranche</code><span> value sequence. However, when we reduced the original 100.0-99.9-... to 60.0-55.0 -... It still won&#39;t get any better. Perhaps this is not as convenient as following the above mentioned solution.</span></li></ul><h4 id='special-note'><span>Special Note</span></h4><p><span>Deepomics&#39; default memory allocation is not nearly enough to complete the entire bioanalysis process! The maximum memory limit of 8000MB caused a fatal error in the analysis process at the second step, but the error didn&#39;t show up until the last 10 steps, which was a serious hindrance to our debugging. Therefore, our team recommends that you set your maximum memory allocation limit to </span><strong><u><span>20480MB (20GB)</span></u></strong><span>, which will be sufficient to allow you to complete your entire process.</span></p><p><span>In addition, given GATK&#39;s excellent multi-core concurrency, properly setting up multiple CPU cores will greatly increase your work speed (as long as the server administrator allows, of course, otherwise it will take up too much resources and affect others&#39; work).</span></p><p><span>If you want to know more about the resource usage of other analysis modules, you can use this link, </span><a href='https://homepage.cs.cityu.edu.hk/jiakaixu2/php/deepomicsRequest.php?start=0&amp;end=1'><span>Deepomics API test</span></a><span>. You need to change 0 to the start ID you want and set 1 to the end ID you want in the URL, which can batch query the resource application amount of all blocks within the range of start~end. Click the corresponding link in that row, and you can also use ALEX&#39;s CodeCoreProcessor to view the details of json inside it. Here&#39;s an example: </span><a href='https://homepage.cs.cityu.edu.hk/jiakaixu2/php/deepomicsRequest.php?start=700&amp;end=730'><span>Module 700~730</span></a><span>.</span></p><hr /><h3 id='gapplinking-decompress-the-vcf-package'><span>GAPP_Linking: Decompress the vcf package</span></h3><p><span>Decompress the </span><code>*.vcf.gz</code><span> file obtained from the previous core biological analysis to facilitate the use of the following modules.</span></p><h4 id='module-inputs-2'><span>Module inputs</span></h4><ul><li><p><span>input files </span></p><ul><li><span>-i: </span><code>GAPP_Core.output.Core_vcf</code></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-d: </span><code>gzip</code></li></ul></li></ul><hr /><h3 id='gappfilter-gene-filter-with-panel-file'><span>GAPP_Filter: Gene filter with panel file</span></h3><h4 id='module-inputs-3'><span>Module inputs</span></h4><ul><li><p><span>input files </span></p><ul><li><span>-p: </span><code>GAPP_Linking.output.LOutput</code></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-i: </span><code>json.uid.value</code></li><li><span>-f: </span><code>json.fid.value</code></li></ul></li></ul><h4 id='main-program-1'><span>Main program</span></h4><p><span>Our python scripts will access the panel file in text format which is located on the server as mentioned above in the </span><a href='#prerequisites'><span>Prerequisites</span></a><span>. During traversal, all genes that do not appear in the panel will be dropped to make our analysis meets the real needs of user.</span></p><hr /><p><span>Given that we&#39;re supposed to have done all the biological analysis by this point, why are we still hesitating? Let&#39;s move on to generating the test report. The overall task of the following parts are to translate the VCF files analyzed by the algorithm into a user-friendly PDF or HTML page.</span></p><hr /><h3 id='gappinfres-data-preprocessing'><span>GAPP_Infres: Data preprocessing</span></h3><p><span>&quot;infres&quot; stand for &quot;</span><strong><span>Information Reserve System</span></strong><span>&quot;</span></p><p><span>The infres system is a Python program that reads VCF files generated by biological analysis and adjusts and integrates them based on relevant guidelines. </span></p><h4 id='module-inputs-4'><span>Module inputs</span></h4><ul><li><p><span>input files </span></p><ul><li><span>-v: </span><code>GAPP_Filter.output.result_vcf</code></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-i: </span><code>json.uid.value</code></li><li><span>-k: </span><code>json.key.value</code></li></ul></li></ul><h4 id='generate-json-1'><span>Generate json</span></h4><p><span>Our AutoRunShell will invoke the </span><code>generate_json.sh</code><span> to perform the detailed work.    </span></p><p><span>This helper script ask for several parameter inputs:   </span><code>-k report_number</code><span>, </span><code>-v vcf_location</code><span>, </span><code>-i identifier_id</code><span>. This program will generate the required JSON file for infres to facilitate their reading and operation, and the specific file format is set up in this code by ourselves, and it is unable to dynamically adjust its format, specific reasons will be discussed in the &quot;Special Debug Note&quot; part later.</span></p><p><span>As for the JSON file for infres, it is quite simple like the following (reformatted by Alex&#39;s CodeCoreProcessor),</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"analysis"</span>: <span class="cm-string">"annotate_variant_vcf"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"intermediate_path"</span>: <span class="cm-string">"./temp123.csv"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"samples"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"id"</span>: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"vcf_file"</span>: <span class="cm-string">"./test/data.anno.hg38_multianno.vcf"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 270px;"></div><div class="CodeMirror-gutters" style="display: none; height: 270px;"></div></div></div></pre><p><strong><span>Special Debug Note</span></strong><span>: In the beginning, we do hope to maintain a concise and normative template layout, so in the first version, we use a unified template JSON file, and used </span><a href='#reference'><code>sed -i</code></a><span> command to replace the key points inside the template to make a new target file. It works really well if we just need to provide the user information and some time stamp. However, when we come to the directory input, namely those intermediate_path or the vcf_location, we meet a trouble,  sed command use &quot;/&quot; as its internal key separator to locate the matching point and the targeted new segment, where the &quot;/&quot; is also must character inside our directory string, we did try to use escape character, but it does not work well.</span></p><h4 id='main-program-2'><span>Main program</span></h4><p><span>This program was previously developed by other seniors, but due to its relatively messy design and strong dependence on the PostgreSQL database, we were required to re-develop it in this project. Miss Yuqin HUANG in our project team bravely assumed the responsibility and undertook all the development work of this part alone. We would also like to thank Mr. Xuedong WANG and Mr. Zicheng ZHAO for their help in dealing with some difficulties.</span></p><p><span>Since we have develop and install this python program under a Python 3.8 environment, a temporary module change will be needed before infres core process using the command,</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">module load python/3.8.2</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 25px;"></div><div class="CodeMirror-gutters" style="display: none; height: 25px;"></div></div></div></pre><p><span>And the core invoking command is like,</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">infres process <span class="cm-attribute">-i</span> JSON_LOCATION</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 25px;"></div><div class="CodeMirror-gutters" style="display: none; height: 25px;"></div></div></div></pre><hr /><h3 id='gappexps-report-generation-process'><span>GAPP_Exps: Report Generation Process</span></h3><p><span>&quot;exps&quot; stand for &quot;</span><strong><span>Express System</span></strong><span>&quot;</span></p><p><span>Exps is a Python program that reads CSV files that have been processed by Infres, looking up the relative gene&#39; and disorders&#39; datafile, generates HTML web pages based on a given template, and saves them into a portable PDF format. </span></p><h4 id='module-inputs-5'><span>Module inputs</span></h4><ul><li><p><span>input files </span></p><ul><li><span>-p: </span><code>GAPP_Infres.output.result_csv</code></li><li><span>-o: The </span><code>*.op</code><span> operator file, this input port is already tested successfully on the module itself, but in this pipeline we only use its default version (without external operator file) because the GAPP website still cannot support uploading and storing the operator file.</span></li><li><span>-h: The </span><code>*.tar.gz</code><span> html template package, this input port is already tested successfully on the module itself, but in this pipeline we only use its default version (without external template package) because the GAPP website still cannot support uploading and storing the template package.</span></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-i: </span><code>json.uid.value</code></li><li><span>-k: </span><code>json.key.value</code></li><li><span>-n: </span><code>json.user.name.value</code></li><li><span>-g: </span><code>json.user.gender.value</code></li></ul></li></ul><h4 id='about-template-package'><span>About template package</span></h4><p><span>You should have a folder structure like the following:</span></p><div class="md-diagram-panel md-fences-adv-panel"><svg id="mermaidChart0" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="249.61109924316406" style="max-width: 827.8092041015625px;" viewBox="0 0.0000019073486328125 827.8092041015625 249.61109924316406"><style>#mermaidChart0{font-family:sans-serif;font-size:16px;fill:#333;}#mermaidChart0 .error-icon{fill:#552222;}#mermaidChart0 .error-text{fill:#552222;stroke:#552222;}#mermaidChart0 .edge-thickness-normal{stroke-width:2px;}#mermaidChart0 .edge-thickness-thick{stroke-width:3.5px;}#mermaidChart0 .edge-pattern-solid{stroke-dasharray:0;}#mermaidChart0 .edge-pattern-dashed{stroke-dasharray:3;}#mermaidChart0 .edge-pattern-dotted{stroke-dasharray:2;}#mermaidChart0 .marker{fill:#333333;}#mermaidChart0 .marker.cross{stroke:#333333;}#mermaidChart0 svg{font-family:sans-serif;font-size:16px;}#mermaidChart0 .label{font-family:sans-serif;color:#333;}#mermaidChart0 .label text{fill:#333;}#mermaidChart0 .node rect,#mermaidChart0 .node circle,#mermaidChart0 .node ellipse,#mermaidChart0 .node polygon,#mermaidChart0 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaidChart0 .node .label{text-align:center;}#mermaidChart0 .node.clickable{cursor:pointer;}#mermaidChart0 .arrowheadPath{fill:#333333;}#mermaidChart0 .edgePath .path{stroke:#333333;stroke-width:1.5px;}#mermaidChart0 .flowchart-link{stroke:#333333;fill:none;}#mermaidChart0 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaidChart0 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaidChart0 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaidChart0 .cluster text{fill:#333;}#mermaidChart0 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:sans-serif;font-size:12px;background:hsl(80,100%,96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaidChart0:root{--mermaid-font-family:sans-serif;}#mermaidChart0:root{--mermaid-alt-font-family:sans-serif;}#mermaidChart0 flowchart{fill:apa;}</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-R LE-A" id="L-R-A" style="opacity: 1;"><path class="path" d="M46.70659637451172,151.44873656112856L71.70659637451172,124.80555534362793L99.99435424804688,124.80555534362793" marker-end="url(#arrowhead26)" style="fill:none"></path><defs><marker id="arrowhead26" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"><path class="path" d="M247.7106475830078,124.80555534362793L275.99840545654297,124.80555534362793L300.99840545654297,124.80555534362793" marker-end="url(#arrowhead27)" style="fill:none"></path><defs><marker id="arrowhead27" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-B LE-C" id="L-B-C" style="opacity: 1;"><path class="path" d="M382.8239194126021,102.53703689575195L421.22989654541016,77.53703689575195L525.7401638031006,77.53703689575195" marker-end="url(#arrowhead28)" style="fill:none"></path><defs><marker id="arrowhead28" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-B LE-F" id="L-B-F" style="opacity: 1;"><path class="path" d="M365.71903520678933,147.0740737915039L421.22989654541016,219.34259223937988L446.22989654541016,219.34259223937988" marker-end="url(#arrowhead29)" style="fill:none"></path><defs><marker id="arrowhead29" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-D" id="L-C-D" style="opacity: 1;"><path class="path" d="M588.1229801177979,66.6722362409955L692.6332473754883,30.268518447875977L721.4888648986816,30.268518447875977" marker-end="url(#arrowhead30)" style="fill:none"></path><defs><marker id="arrowhead30" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-C LE-E" id="L-C-E" style="opacity: 1;"><path class="path" d="M588.1229801177979,88.4018375505084L692.6332473754883,124.80555534362793L717.6332473754883,124.80555534362793" marker-end="url(#arrowhead31)" style="fill:none"></path><defs><marker id="arrowhead31" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-F LE-G" id="L-F-G" style="opacity: 1;"><path class="path" d="M667.6332473754883,219.34259223937988L692.6332473754883,219.34259223937988L717.6332473754883,219.34259223937988" marker-end="url(#arrowhead32)" style="fill:none"></path><defs><marker id="arrowhead32" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-R LE-H" id="L-R-H" style="opacity: 1;"><path class="path" d="M46.70659637451172,192.69941102187926L71.70659637451172,219.34259223937988L96.70659637451172,219.34259223937988" marker-end="url(#arrowhead33)" style="fill:none"></path><defs><marker id="arrowhead33" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><rect rx="0" ry="0" width="0" height="0"></rect><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-R-25" transform="translate(27.35329818725586,172.0740737915039)" style="opacity: 1;"><rect rx="5" ry="5" x="-19.35329818725586" y="-22.268518447875977" width="38.70659637451172" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-9.35329818725586,-12.268518447875977)"><foreignObject width="18.70659637451172" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">~/</div></foreignObject></g></g></g><g class="node default" id="flowchart-A-26" transform="translate(173.85250091552734,124.80555534362793)" style="opacity: 1;"><rect rx="5" ry="5" x="-73.8581428527832" y="-22.268518447875977" width="147.7162857055664" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-63.8581428527832,-12.268518447875977)"><foreignObject width="127.7162857055664" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">{your_directory}/</div></foreignObject></g></g></g><g class="node default" id="flowchart-B-27" transform="translate(348.61415100097656,124.80555534362793)" style="opacity: 1;"><rect rx="5" ry="5" x="-47.615745544433594" y="-22.268518447875977" width="95.23149108886719" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-37.615745544433594,-12.268518447875977)"><foreignObject width="75.23148345947266" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">template/</div></foreignObject></g></g></g><g class="node default" id="flowchart-C-28" transform="translate(556.9315719604492,77.53703689575195)" style="opacity: 1;"><rect rx="5" ry="5" x="-31.19140625" y="-22.268518447875977" width="62.3828125" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.19140625,-12.268518447875977)"><foreignObject width="42.3828125" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">base/</div></foreignObject></g></g></g><g class="node default" id="flowchart-D-29" transform="translate(768.7212142944336,30.268518447875977)" style="opacity: 1;"><rect rx="0" ry="0" x="-47.23234939575195" y="-22.268518447875977" width="94.4646987915039" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-37.23234939575195,-12.268518447875977)"><foreignObject width="74.4646987915039" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">base.html</div></foreignObject></g></g></g><g class="node default" id="flowchart-E-30" transform="translate(768.7212142944336,124.80555534362793)" style="opacity: 1;"><rect rx="0" ry="0" x="-51.08796691894531" y="-22.268518447875977" width="102.17593383789062" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-41.08796691894531,-12.268518447875977)"><foreignObject width="82.1759262084961" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">{other_file}</div></foreignObject></g></g></g><g class="node default" id="flowchart-F-31" transform="translate(556.9315719604492,219.34259223937988)" style="opacity: 1;"><rect rx="5" ry="5" x="-110.70167541503906" y="-22.268518447875977" width="221.40335083007812" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-100.70167541503906,-12.268518447875977)"><foreignObject width="201.40335083007812" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">{other_support_directory}/</div></foreignObject></g></g></g><g class="node default" id="flowchart-G-32" transform="translate(768.7212142944336,219.34259223937988)" style="opacity: 1;"><rect rx="0" ry="0" x="-51.08796691894531" y="-22.268518447875977" width="102.17593383789062" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-41.08796691894531,-12.268518447875977)"><foreignObject width="82.1759262084961" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">{other_file}</div></foreignObject></g></g></g><g class="node default" id="flowchart-H-33" transform="translate(173.85250091552734,219.34259223937988)" style="opacity: 1;"><rect rx="5" ry="5" x="-77.14590454101562" y="-22.268518447875977" width="154.29180908203125" height="44.53703689575195" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-67.14590454101562,-12.268518447875977)"><foreignObject width="134.29180908203125" height="24.537036895751953"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">{other_directory}/</div></foreignObject></g></g></g></g></g></g></svg></div><p><span>You can set all the text in { }, but the rest of the file names must be the same. Because we would point the key pointer to: </span><code>EXPS_INTERNAL_PATH/template/base/base.html</code><span>. So you just need to keep the path of this file unchanged, the rest of the included file path you are free to set.</span></p><p><span>If you are confused about how to pack your folders, here is a tip you can use on Linux or MacOS:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> ~/<span class="cm-def">${your_directory}</span>/</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">tar <span class="cm-attribute">-zcvf</span> <span class="cm-def">${your_filename}</span>.tar.gz template/</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 49px;"></div><div class="CodeMirror-gutters" style="display: none; height: 49px;"></div></div></div></pre><h4 id='pruning'><span>Pruning</span></h4><p><span>In order to prevent some excessively long strings from seriously interfering with the overall aesthetics of the final report, Our Mr. Xun ZHANG designed a pruning program in python, which is used to trim specific variables according to some indicators.</span></p><h4 id='generate-json-2'><span>Generate json</span></h4><p><span>Our AutoRunShell will invoke the </span><code>generate_json.sh</code><span> to perform the detailed work.    </span></p><p><span>This helper script ask for several parameter inputs:   </span><code>-k report_number</code><span>, </span><code>-p intermediate_path</code><span>, </span><code>-n identifier_name</code><span>, </span><code>-i identifier_id</code><span> and </span><code>-g identifier_gender</code><span>, although it seems the parameters are relative too complex to memorize clearly, it is because we need to display all the user own information onto the report, for which we have no way to create by ourselves, fortunately, all the meanings of those input parameters can be found inside the </span><a href='#input'><span>Input Json</span></a><span>.</span></p><p><span>While the JSON file for exps is a little bit complicated compared with the Infres one, since it contians so many user information that needs to pass. A sample JSON is like the following (reformatted by Alex&#39;s CodeCoreProcessor),</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"product_name"</span>: <span class="cm-string">"child genetic test"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"operator"</span>: <span class="cm-string">"./report/operators/rare_disease_operator.op"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"template_path"</span>: <span class="cm-string">"rare_disease_CHN/base/base.html"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"template_loader_path"</span>: <span class="cm-string">"./report/templates"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"intermediate_path"</span>: <span class="cm-string">"./temp123.csv"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"analysis"</span>: <span class="cm-string">"annotate_variant_vcf"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"output_path_html"</span>: <span class="cm-string">"./output/child/html/202100001.html"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"output_path_pdf"</span>: <span class="cm-string">"../output/202100001.pdf"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"report_num"</span>: <span class="cm-string">"202100001"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"phone_num"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"referring_docter"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"report_time"</span>: <span class="cm-string">"2021-11-18"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"language"</span>: <span class="cm-string">"CHN"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"sample_infos"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"identifier_name"</span>: <span class="cm-string">"Zhang_Sam"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"identifier_id"</span>: <span class="cm-number">1</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"identifier_gender"</span>: <span class="cm-string">"male"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"identifier_birthday"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"identifier_region"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"sample_type"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"sample_receive_ensure_time"</span>: <span class="cm-string">""</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string cm-property">"sample_receive_time"</span>: <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 712px;"></div><div class="CodeMirror-gutters" style="display: none; height: 712px;"></div></div></div></pre><h4 id='main-program-3'><span>Main program</span></h4><p><span>This program was previously developed by other seniors, but due to its relatively messy design and strong dependence on the PostgreSQL database, we were required to re-develop it in this project. Mr. Xun ZHANG and Mr. Jiakai XU in our project team undertook this part of the development work. We would also like to thank Mr. Bowen TAN and Mr. Xuedong WANG for their great help in dealing with some difficulties.</span></p><p><span>Since we have develop and install this python program under a Python 3.8 environment, a temporary module change will be needed before exps core process using the command,</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">module load python/3.8.2</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 25px;"></div><div class="CodeMirror-gutters" style="display: none; height: 25px;"></div></div></div></pre><p><span>At the same time, a file copy using </span><code>cp</code><span> is also needed to move the intermediate csv file from infres working space to exps working space.</span></p><p><span>And the core invoking command is like,</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.2685px; left: 3.99306px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">exps <span class="cm-attribute">-i</span> JSON_LOCATION <span class="cm-attribute">-c</span> INI_LOCATION</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 25px;"></div><div class="CodeMirror-gutters" style="display: none; height: 25px;"></div></div></div></pre><hr /><h3 id='gapplinking-unified-output-path'><span>GAPP_Linking: Unified output path</span></h3><p><span>We will use this module several more times to unify the location of the output files. As for how to access these files from GAPP, please consult Mr. Xun ZHANG, because obviously how to use and call these analysis results is not something that needs to be considered in this analysis pipeline.</span></p><h4 id='module-inputs-6'><span>Module inputs</span></h4><ul><li><p><span>First run</span></p><ul><li><p><span>input files </span></p><ul><li><span>-i: </span><code>GAPP_Filter.output.result_vcf</code></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-d: </span><code>cp</code></li></ul></li></ul></li><li><p><span>Second run</span></p><ul><li><p><span>input files </span></p><ul><li><span>-i: </span><code>GAPP_Exps.output.result_pdf</code></li></ul></li><li><p><span>parameters</span></p><ul><li><span>-d: </span><code>cp</code></li></ul></li></ul></li></ul><h4 id='module-outputs'><span>Module outputs</span></h4><p><span>After the above operations, we successfully copied the </span><code>*.vcf</code><span> file obtained from the biological analysis and the final generated </span><code>*.pdf</code><span> report as the final outputs.</span></p><h3 id='ending'><span>Ending</span></h3><p><span>This is the end of the whole pipeline, and if all goes well, you will find the final detection report generated in the task workspace environment in the corresponding location, such as in the output folder. In future commercial applications, if some files are confirmed to be no longer needed, we can conduct unified storage and sorting here to make the server friendly.</span></p><h2 id='in-the-end'><span>In the end</span></h2><p><span>Finally, this is all about our main analysis process, GAPP_Main02 Pipeline. It&#39;s time to say goodbye to you, thank you for reading our development documentation, and we the GAPP development team would like to wish you all the best in your work! If you have any questions, please ask our corresponding developers according to the specific types of problems. We will try our best to help you solve the problems and improve our products together. Thank you very much!</span></p><p><span>Jiakai XU</span>
<span>On behalf of the GAPP development team</span>
<span>April 19, 2022</span></p><h2 id='reference'><span>Reference</span></h2><p><a href='https://gapp.deepomics.org/'><span>GAPP &lt;https://gapp.deepomics.org&gt;</span></a></p><p><a href='https://deepomics.org/'><span>Deepomics &lt;https://deepomics.org&gt;</span></a></p><p><a href='https://gatk.broadinstitute.org/hc/en-us'><span>GATK &lt;https://gatk.broadinstitute.org/hc/en-us&gt;</span></a></p><p><a href='https://www.gnu.org/software/sed/manual/sed.htm'><span>Linux sed &lt;https://www.gnu.org/software/sed/manual/sed.htm&gt;</span></a></p><p>&nbsp;</p></div></div>
</body>
</html>